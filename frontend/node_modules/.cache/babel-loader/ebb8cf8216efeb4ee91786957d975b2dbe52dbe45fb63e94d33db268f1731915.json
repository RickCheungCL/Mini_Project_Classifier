{"ast":null,"code":"// src/store/slices/chatSlice.js\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nexport const analyzeWebsite = createAsyncThunk('chat/analyzeWebsite', async url => {\n  const response = await fetch('/api/analyze', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      url\n    })\n  });\n  if (!response.ok) throw new Error('Failed to analyze website');\n  return response.json();\n});\nconst chatSlice = createSlice({\n  name: 'chat',\n  initialState: {\n    messages: [{\n      type: 'bot',\n      content: \"Hi! I can help analyze any website and understand what you're looking for. Please share a URL you'd like to explore!\"\n    }],\n    loading: false,\n    error: null,\n    currentUrl: '',\n    selectedOption: null\n  },\n  reducers: {\n    addMessage: (state, action) => {\n      state.messages.push(action.payload);\n    },\n    setCurrentUrl: (state, action) => {\n      state.currentUrl = action.payload;\n    },\n    setSelectedOption: (state, action) => {\n      state.selectedOption = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(analyzeWebsite.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(analyzeWebsite.fulfilled, (state, action) => {\n      state.loading = false;\n      state.messages.push({\n        type: 'bot',\n        content: action.payload.question,\n        options: action.payload.options\n      });\n    }).addCase(analyzeWebsite.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message;\n      state.messages.push({\n        type: 'bot',\n        content: \"I had trouble analyzing that website. Could you try another one?\"\n      });\n    });\n  }\n});\nexport const {\n  addMessage,\n  setCurrentUrl,\n  setSelectedOption\n} = chatSlice.actions;\nexport default chatSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","analyzeWebsite","url","response","fetch","method","headers","body","JSON","stringify","ok","Error","json","chatSlice","name","initialState","messages","type","content","loading","error","currentUrl","selectedOption","reducers","addMessage","state","action","push","payload","setCurrentUrl","setSelectedOption","extraReducers","builder","addCase","pending","fulfilled","question","options","rejected","message","actions","reducer"],"sources":["D:/project_classifier/classifier/frontend/src/store/slices/chatSlice.js"],"sourcesContent":["// src/store/slices/chatSlice.js\r\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\nexport const analyzeWebsite = createAsyncThunk(\r\n  'chat/analyzeWebsite',\r\n  async (url) => {\r\n    const response = await fetch('/api/analyze', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ url })\r\n    });\r\n    if (!response.ok) throw new Error('Failed to analyze website');\r\n    return response.json();\r\n  }\r\n);\r\n\r\nconst chatSlice = createSlice({\r\n  name: 'chat',\r\n  initialState: {\r\n    messages: [{\r\n      type: 'bot',\r\n      content: \"Hi! I can help analyze any website and understand what you're looking for. Please share a URL you'd like to explore!\"\r\n    }],\r\n    loading: false,\r\n    error: null,\r\n    currentUrl: '',\r\n    selectedOption: null\r\n  },\r\n  reducers: {\r\n    addMessage: (state, action) => {\r\n      state.messages.push(action.payload);\r\n    },\r\n    setCurrentUrl: (state, action) => {\r\n      state.currentUrl = action.payload;\r\n    },\r\n    setSelectedOption: (state, action) => {\r\n      state.selectedOption = action.payload;\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(analyzeWebsite.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(analyzeWebsite.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.messages.push({\r\n          type: 'bot',\r\n          content: action.payload.question,\r\n          options: action.payload.options\r\n        });\r\n      })\r\n      .addCase(analyzeWebsite.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.error.message;\r\n        state.messages.push({\r\n          type: 'bot',\r\n          content: \"I had trouble analyzing that website. Could you try another one?\"\r\n        });\r\n      });\r\n  }\r\n});\r\n\r\nexport const { addMessage, setCurrentUrl, setSelectedOption } = chatSlice.actions;\r\nexport default chatSlice.reducer;\r\n\r\n"],"mappings":"AAAA;AACA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAEhE,OAAO,MAAMC,cAAc,GAAGD,gBAAgB,CAC5C,qBAAqB,EACrB,MAAOE,GAAG,IAAK;EACb,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,cAAc,EAAE;IAC3CC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEP;IAAI,CAAC;EAC9B,CAAC,CAAC;EACF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;EAC9D,OAAOR,QAAQ,CAACS,IAAI,CAAC,CAAC;AACxB,CACF,CAAC;AAED,MAAMC,SAAS,GAAGd,WAAW,CAAC;EAC5Be,IAAI,EAAE,MAAM;EACZC,YAAY,EAAE;IACZC,QAAQ,EAAE,CAAC;MACTC,IAAI,EAAE,KAAK;MACXC,OAAO,EAAE;IACX,CAAC,CAAC;IACFC,OAAO,EAAE,KAAK;IACdC,KAAK,EAAE,IAAI;IACXC,UAAU,EAAE,EAAE;IACdC,cAAc,EAAE;EAClB,CAAC;EACDC,QAAQ,EAAE;IACRC,UAAU,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC7BD,KAAK,CAACT,QAAQ,CAACW,IAAI,CAACD,MAAM,CAACE,OAAO,CAAC;IACrC,CAAC;IACDC,aAAa,EAAEA,CAACJ,KAAK,EAAEC,MAAM,KAAK;MAChCD,KAAK,CAACJ,UAAU,GAAGK,MAAM,CAACE,OAAO;IACnC,CAAC;IACDE,iBAAiB,EAAEA,CAACL,KAAK,EAAEC,MAAM,KAAK;MACpCD,KAAK,CAACH,cAAc,GAAGI,MAAM,CAACE,OAAO;IACvC;EACF,CAAC;EACDG,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAAChC,cAAc,CAACiC,OAAO,EAAGT,KAAK,IAAK;MAC1CA,KAAK,CAACN,OAAO,GAAG,IAAI;MACpBM,KAAK,CAACL,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDa,OAAO,CAAChC,cAAc,CAACkC,SAAS,EAAE,CAACV,KAAK,EAAEC,MAAM,KAAK;MACpDD,KAAK,CAACN,OAAO,GAAG,KAAK;MACrBM,KAAK,CAACT,QAAQ,CAACW,IAAI,CAAC;QAClBV,IAAI,EAAE,KAAK;QACXC,OAAO,EAAEQ,MAAM,CAACE,OAAO,CAACQ,QAAQ;QAChCC,OAAO,EAAEX,MAAM,CAACE,OAAO,CAACS;MAC1B,CAAC,CAAC;IACJ,CAAC,CAAC,CACDJ,OAAO,CAAChC,cAAc,CAACqC,QAAQ,EAAE,CAACb,KAAK,EAAEC,MAAM,KAAK;MACnDD,KAAK,CAACN,OAAO,GAAG,KAAK;MACrBM,KAAK,CAACL,KAAK,GAAGM,MAAM,CAACN,KAAK,CAACmB,OAAO;MAClCd,KAAK,CAACT,QAAQ,CAACW,IAAI,CAAC;QAClBV,IAAI,EAAE,KAAK;QACXC,OAAO,EAAE;MACX,CAAC,CAAC;IACJ,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEM,UAAU;EAAEK,aAAa;EAAEC;AAAkB,CAAC,GAAGjB,SAAS,CAAC2B,OAAO;AACjF,eAAe3B,SAAS,CAAC4B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}